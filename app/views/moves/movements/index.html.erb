<%= title "Movements", subtitle: "Track all stuff as its packed, moved, and unpacked into a new place", icon: "dolly-cart" %>

<div class="buttons">
  <%= link_to "+ Create moving label", new_move_movement_builder_path(@move), class: "btn btn-primary" %>
</div>

<% if @movements.empty? %>
  <%= render Components::EmptyListComponent.new do |it| %>
    <%= it.title { "Create a moving label" } %>
    <%= it.message { "Get started with your move by creating labels that you can put on your box." } %>
    <%= it.action(new_move_movement_builder_path(@move)) { "+ Create moving label" } %>
  <% end %>

<% else %>
  <div class="list-cards">
    <% @movements.each do |movement| %>
      <% with movement.origin do |item| %>
        <%= render Components::List::CardComponent.new(item.name, movement, icon: item.icon) do |c| %>
          <%= c.slot(:detail) do %>
            Move to
            <%= link_to movement.destination.name, movement.destination %>
          <% end %>
          <%= c.slot(:detail) do %>
            Created
            <%= local_time_ago item.created_at %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% end %>

<div class="buttons">
  <%= link_to "Delete move", move_path(@move), class: "btn btn-outline", "data-turbo-method": :delete, data: { confirm: "Are you sure?" } %>
</div>

